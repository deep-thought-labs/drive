services:
  infinite-mainnet:
    # Core service settings (image, name, user, restart) - not expected to be modified by users
    image: deepthoughtlabs/infinite-drive:latest
    container_name: infinite-mainnet
    user: "1000:1000"
    restart: unless-stopped

    ##################################################################################
    #                       Editable Section Starts Here                             #
    # Customize ports, volumes, and environment variables as needed below.           #
    ##################################################################################

    ports:
      # Ports mapping: Expose internal container ports to the host
      #
      # Format: "HOST_PORT:CONTAINER_PORT"
      # - HOST_PORT: Port on your machine (can be changed to avoid conflicts)
      # - CONTAINER_PORT: Fixed internal port (do not change: P2P is 26656, RPC is 26657)
      #
      # Why edit? If the host port is already in use (e.g., another app on 26657), change HOST_PORT to a free one.
      # Example: If 26657 is busy, use "26658:26657" — this maps host 26658 to container's 26657.
      #
      # P2P port for network communication
      - "26656:26656"
      #
      # RPC port for API access
      - "26657:26657"
    
    volumes:
      # Volumes: Persist data outside the container to avoid loss on restart/stop
      #
      # Format: "host/path:container/path"
      # - This mounts './persistent-data' on host to '/home/ubuntu/.infinited' inside container
      # - Purpose: Keeps blockchain data (config, keys, state) safe and persistent
      #
      # Note: Do not modify unless you need a custom data location (not recommended for most users).
      #
      # Examples (include the guion - at the beginning of the line):
      # - ./persistent-data:/home/ubuntu/.infinited             # Default local folder
      # - /mnt/external-drive/infinite:/home/ubuntu/.infinited  # Store on external drive
      # - /data/infinite:/home/ubuntu/.infinited                # Store on a dedicated partition or folder
      - ./persistent-data:/home/ubuntu/.infinited

    environment:
      # Environment variables: Required and Optional variables used for the node configuration.

      ##################################################################################
      #                           Chain Identification                                 #
      ##################################################################################
      NODE_CHAIN_ID: "infinite_421018-1"  # Chain ID for the Infinite network
      NODE_EVM_CHAIN_ID: "421018"         # EVM Chain ID for compatibility
      NODE_GENESIS_URL: "https://raw.githubusercontent.com/deep-thought-labs/infinite/migration/config/genesis/assets/pre-mainet-genesis.json"  

      ##################################################################################
      #                           Network P2P Configuration                            #
      ##################################################################################

      # Seed nodes for P2P discovery
      #
      # format for single seed:    "id@ip:port"
      # format using domain names: "id@domain.com:port" or "id@subdomain.domain.com:port"
      # When using multiple seeds, use a comma to separate them: "id1@ip1:port,id2@example.com:port,id3@ip3:port"
      #
      # example: NODE_P2P_SEEDS: "77d4b2346a80d423dda12d1b738519c2b40a8f5d@seed1.infinitedrive.xyz:26656"
      #
      # (required for initial connection)
      NODE_P2P_SEEDS: "77d4b2346a80d423dda12d1b738519c2b40a8f5d@66.70.178.128:26656" 

      # Persistent peers for stable connections
      #
      # The format and usage of NODE_PERSISTENT_PEERS is exactly the same as NODE_P2P_SEEDS:
      #   "id@ip:port", "id@domain.com:port" or multiple nodes separated by commas,
      #   e.g. "id1@ip1:port,id2@domain.com:port"
      #
      # The key difference is in functionality:
      #   - Persistent peers are trusted, healthy nodes that your node will attempt to stay permanently connected to.
      #   - This is optional: you do NOT need to add persistent peers; please investigate and add if needed for your case.
      #
      # (optional, uncomment and set if needed)
      # NODE_PERSISTENT_PEERS: ""

      # External address for P2P discovery (useful if your node is behind NAT/firewall)
      #
      # Set this if you want your node to be reachable by other peers in the network.
      # For example, if your node has a public/static IP address or you have set up a domain name that points to your node,
      # you should specify that address here so other nodes can find and connect to you.
      #
      # This is the address where your node can be discovered on the P2P network.
      #
      # Format: "ip:port" or "domain.com:port" or "subdomain.domain.com:port"
      # Note: use the P2P HOST_PORT set in the ports section.
      #
      # Example:
      #   NODE_P2P_EXTERNAL_ADDRESS: "203.0.113.50:26656" (your public IP address)
      #   NODE_P2P_EXTERNAL_ADDRESS: "yourdomain.com:26656"
      #
      # By setting this, other users can easily add your node to their own NODE_P2P_SEEDS list 
      # (seed1.infinitedrive.xyz:26656 is the external address of the seed node that we are using on NODE_P2P_SEEDS). 
      # This helps grow and strengthen the network!
      #
      # (Optional — uncomment and set only if your node should be publicly accessible)
      # NODE_P2P_EXTERNAL_ADDRESS: ""

    ### End environment variables
  ### End service infinite-mainnet
### End docker-compose.yml