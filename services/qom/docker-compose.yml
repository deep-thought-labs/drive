services:
  qom-node:
    # Core service settings (build, name, user, restart) - QOM blockchain node
    # This builds the image locally from the Dockerfile in dev/ directory
    build:
      context: ../../../dev
      dockerfile: Dockerfile
    image: infinite-drive:qom
    container_name: qom-node
    restart: unless-stopped

    ##################################################################################
    #                       Editable Section Starts Here                             #
    # Customize ports, volumes, and environment variables as needed below.           #
    ##################################################################################

    ports:
      # See services/PORTS.md for port allocation strategy and conflict resolution
      - "26666:26656"  # P2P
      - "26667:26657"  # RPC
    
    volumes:
      - ./persistent-data:/home/ubuntu/.qomd

    environment:
      # For complete documentation of all environment variables, see: services/ENVIRONMENT_VARIABLES.md
      # For port allocation and configuration, see: services/PORTS.md

      ##################################################################################
      #                           Chain Identification                                 #
      ##################################################################################
      NODE_CHAIN_ID: "qom_766-1"
      NODE_EVM_CHAIN_ID: "766"
      NODE_GENESIS_URL: "https://raw.githubusercontent.com/deep-thought-labs/babelfish-vm/main/resources/genesis.json"

      ##################################################################################
      #                    Conditional Argument Flags                                 #
      ##################################################################################
      NODE_FLAG_EVM_CHAIN_ID_ENABLED: "false"

      ##################################################################################
      #                           Network P2P Configuration                            #
      ##################################################################################
      # NODE_P2P_SEEDS: ""
      # NODE_PERSISTENT_PEERS: ""
      # NODE_P2P_EXTERNAL_ADDRESS: ""

      ##################################################################################
      #                    Alternative Binary Configuration                            #
      ##################################################################################
      NODE_ALT_BINARY_URL_AMD64: "https://github.com/WizardLatino/test-qom-node/releases/download/v1.0.1/qomd-linux-amd64"
      NODE_ALT_BINARY_NAME: "qomd"
      NODE_ALT_HOME: "/home/ubuntu/.qomd"

    ### End environment variables
  ### End service qom-node
### End docker-compose.yml

