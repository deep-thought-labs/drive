# Multiple Domains Configuration
# Purpose: Configure multiple domains/virtual hosts in one file
#
# Usage:
# 1. Copy this file to persistent-data/conf.d/multiple-domains.conf
# 2. Modify domain names, root directories, and SSL certificates
# 3. Test: docker compose exec nginx nginx -t
# 4. Reload: docker compose exec nginx nginx -s reload
#
# Note: Each server block handles a different domain

# MODIFY: Domain 1 - example.com
server {
    listen 80;
    listen [::]:80;
    
    # MODIFY: Change to your domain name
    server_name example.com www.example.com;
    
    # MODIFY: Root directory for this domain
    # Maps to: persistent-data/html/example.com/
    root /usr/share/nginx/html/example.com;
    index index.html index.htm;
    
    location / {
        try_files $uri $uri/ =404;
    }
    
    # Optional: SSL configuration (uncomment if using HTTPS)
    # listen 443 ssl http2;
    # ssl_certificate /etc/nginx/ssl/example.com.crt;
    # ssl_certificate_key /etc/nginx/ssl/example.com.key;
}

# MODIFY: Domain 2 - api.example.com
server {
    listen 80;
    listen [::]:80;
    
    # MODIFY: Change to your API subdomain
    server_name api.example.com;
    
    # MODIFY: API proxy configuration
    location / {
        # MODIFY: Change to your API backend
        proxy_pass http://localhost:8080;
        
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # Optional: SSL configuration
    # listen 443 ssl http2;
    # ssl_certificate /etc/nginx/ssl/api.example.com.crt;
    # ssl_certificate_key /etc/nginx/ssl/api.example.com.key;
}

# MODIFY: Domain 3 - blog.example.com
server {
    listen 80;
    listen [::]:80;
    
    # MODIFY: Change to your blog subdomain
    server_name blog.example.com;
    
    # MODIFY: Root directory for blog
    root /usr/share/nginx/html/blog;
    index index.html index.htm;
    
    location / {
        try_files $uri $uri/ =404;
    }
}

# MODIFY: Wildcard domain - catches all other subdomains
# server {
#     listen 80;
#     listen [::]:80;
#     
#     server_name *.example.com;
#     
#     root /usr/share/nginx/html/wildcard;
#     index index.html;
#     
#     location / {
#         try_files $uri $uri/ =404;
#     }
# }

# MODIFY: Default server - catches requests that don't match any server_name
# server {
#     listen 80 default_server;
#     listen [::]:80 default_server;
#     
#     server_name _;
#     
#     return 444;  # Close connection without response
#     # Or redirect to main domain:
#     # return 301 https://example.com$request_uri;
# }

