services:
  nginx:
    # Core service settings (image, name, user, restart) - not expected to be modified by users
    image: nginx:latest
    container_name: nginx
    restart: unless-stopped

    ##################################################################################
    #                       Editable Section Starts Here                             #
    # Customize ports, volumes, and configuration as needed below.                   #
    ##################################################################################

    ports:
      # See ../../config/ports/strategy.md for port allocation strategy and conflict resolution
      # See ../../config/ports/services/service4-nginx.md for complete port configuration
      # NOTE: This service uses standard ports (80, 443) and does NOT follow the +10 offset rule
      # This is the primary web/proxy server, so it uses standard HTTP/HTTPS ports
      # Required ports
      - "80:80"      # HTTP
      - "443:443"    # HTTPS
    
    volumes:
      # HTML content directory
      - ./persistent-data/html:/usr/share/nginx/html:ro
      
      # Nginx configuration directory (for site configs)
      - ./persistent-data/conf.d:/etc/nginx/conf.d:ro
      
      # Nginx logs directory
      - ./persistent-data/logs:/var/log/nginx
      
      # SSL certificates directory (for HTTPS)
      - ./persistent-data/ssl:/etc/nginx/ssl:ro

    # Optional: Health check
    healthcheck:
      test: ["CMD", "nginx", "-t"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 5s

    ### End service nginx
### End docker-compose.yml

